#include <stm32f0xx.h>

#define SDA GPIO_Pin_2
#define SCL GPIO_Pin_3
#define SSD1306_LCDWIDTH                    128
#define SSD1306_LCDHEIGHT                   64
#define _BV(bit) (1<<(bit))
GPIO_InitTypeDef  GPIO_InitStructure;
static uint8_t buffer[] = { 
	0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
	0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
	0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
	0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
	0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
	0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
	0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
	0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
	0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
	0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
	0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
	0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
	0x3E, 0x0A, 0x0A, 0x0A, 0x04, 0x00, 0x1C, 0x22, 0x22, 0x22, 0x1C, 0x00, 0x1E, 0x20, 0x1E, 0x20,
	0x1E, 0x00, 0x3E, 0x2A, 0x2A, 0x2A, 0x2A, 0x00, 0x3E, 0x0A, 0x0A, 0x0A, 0x34, 0x00, 0x3E, 0x2A,
	0x2A, 0x2A, 0x2A, 0x00, 0x3E, 0x22, 0x22, 0x22, 0x1C, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x3E,
	0x2A, 0x2A, 0x2A, 0x14, 0x00, 0x06, 0x08, 0x30, 0x08, 0x06, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
	0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x80, 0x00,
	0x00, 0x40, 0x00, 0x00, 0x40, 0x00, 0x00, 0x80, 0x40, 0x40, 0x20, 0x20, 0x10, 0x08, 0x84, 0x7E,
	0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
	0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
	0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
	0x00, 0x3E, 0x22, 0x22, 0x1C, 0x00, 0x18, 0x34, 0x2C, 0x08, 0x00, 0x28, 0x2C, 0x34, 0x14, 0x00,
	0x3A, 0x00, 0x18, 0xA4, 0xA4, 0x7C, 0x00, 0x3C, 0x04, 0x04, 0x38, 0x00, 0x3E, 0x22, 0x22, 0x1C,
	0x00, 0x3E, 0x04, 0x08, 0x3E, 0x00, 0x3C, 0x12, 0x12, 0x3C, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
	0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x20, 0x00, 0x08, 0x00, 0x02, 0x00, 0x00, 0xF0,
	0x08, 0x04, 0x84, 0x42, 0x22, 0x11, 0x11, 0x18, 0x28, 0x44, 0x84, 0x0A, 0x12, 0x21, 0xC0, 0xC1,
	0x00, 0x02, 0x00, 0x08, 0x00, 0x20, 0x80, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
	0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
	0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
	0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
	0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
	0x00, 0x00, 0x00, 0x80, 0x40, 0x40, 0x20, 0x20, 0x20, 0x20, 0x20, 0x20, 0x00, 0x00, 0x00, 0x00,
	0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x48, 0x01, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x07,
	0x1A, 0xA3, 0xC4, 0x48, 0x48, 0x30, 0x20, 0x10, 0x08, 0x88, 0x84, 0x45, 0x42, 0x21, 0x10, 0x0F,
	0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x92, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
	0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x80, 0x80, 0x80,
	0x80, 0x80, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x80, 0x00, 0x00, 0x00, 0x00,
	0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x80, 0x80, 0x40, 0x20,
	0x60, 0x40, 0x20, 0x20, 0x20, 0x20, 0x10, 0x10, 0x10, 0x70, 0x38, 0x18, 0x08, 0x04, 0x04, 0x02,
	0x02, 0x01, 0x01, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
	0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x02, 0x10, 0x80, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0xFE,
	0x41, 0x60, 0x50, 0x88, 0x04, 0x02, 0x02, 0x05, 0x05, 0x08, 0x10, 0x21, 0xA2, 0x44, 0x28, 0xF0,
	0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x24, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
	0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x1C, 0x03, 0x01, 0x01, 0x00, 0x00,
	0x00, 0x00, 0xFF, 0x80, 0xC0, 0x20, 0x30, 0x18, 0x0C, 0xE6, 0x7F, 0x21, 0x20, 0xC0, 0x00, 0x80,
	0xE0, 0x30, 0x20, 0x16, 0x1E, 0x06, 0x04, 0x02, 0x0E, 0x06, 0x02, 0x01, 0x01, 0x00, 0x00, 0x00,
	0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
	0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
	0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x02, 0x00, 0x08, 0x00, 0x20, 0x80,
	0x43, 0x24, 0x28, 0x10, 0x11, 0x8A, 0x8C, 0xC4, 0x42, 0x22, 0xA1, 0x11, 0x10, 0x88, 0x04, 0x43,
	0x00, 0x10, 0x00, 0x04, 0x00, 0x01, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
	0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
	0xF0, 0x1E, 0x07, 0x01, 0x00, 0x00, 0x00, 0x00, 0x06, 0x03, 0x00, 0x00, 0x00, 0x01, 0x01, 0x00,
	0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
	0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
	0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
	0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x3F,
	0x10, 0x08, 0x04, 0x02, 0x01, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
	0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
	0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x0E,
	0x03, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
	0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
	0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
	0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00
};
static unsigned char font32[]=
{
	0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x80,0x80,0x80,0xC0,0x40,0x40,0x40,0x40,0x40,0x40,0xC0,0xC0,0x80,0x80,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
	0x00,0x00,0x00,0xE0,0xF8,0xFC,0xFE,0xFF,0x1F,0x07,0x01,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x01,0x03,0x1F,0xFF,0xFE,0xFC,0xF8,0xE0,0x00,0x00,0x00,
	0x00,0x00,0x00,0x0F,0x3F,0x7F,0xFF,0xFF,0xF0,0xC0,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x80,0xF0,0xFF,0xFF,0x7F,0x3F,0x0F,0x00,0x00,0x00,
	0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x01,0x01,0x03,0x03,0x02,0x06,0x04,0x04,0x04,0x04,0x04,0x04,0x06,0x02,0x03,0x03,0x01,0x01,0x00,0x00,0x00,0x00,0x00,0x00,0x00,/*"0",0*/
	/* (32 X 32 , 宋体 )*/

	0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x80,0x80,0xC0,0xC0,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
	0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x01,0x01,0x01,0x01,0x01,0x01,0x01,0xFF,0xFF,0xFF,0xFF,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
	0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0xFF,0xFF,0xFF,0xFF,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
	0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x04,0x04,0x04,0x04,0x04,0x04,0x06,0x07,0x07,0x07,0x07,0x06,0x04,0x04,0x04,0x04,0x04,0x04,0x00,0x00,0x00,0x00,0x00,0x00,0x00,/*"1",1*/
	/* (32 X 32 , 宋体 )*/

	0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x80,0x80,0x80,0x80,0x40,0x40,0x40,0x40,0x40,0x40,0x40,0x40,0xC0,0xC0,0x80,0x80,0x80,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
	0x00,0x00,0x00,0x00,0x0E,0x1F,0x1F,0x1F,0x1D,0x18,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x80,0x80,0xE1,0xFF,0xFF,0x7F,0x3F,0x1E,0x00,0x00,0x00,0x00,0x00,
	0x00,0x00,0x00,0x00,0x00,0x80,0x80,0xC0,0x40,0x60,0x20,0x30,0x10,0x18,0x08,0x0C,0x04,0x06,0x03,0x03,0x01,0x01,0x00,0x00,0x00,0x80,0xE0,0x60,0x00,0x00,0x00,0x00,
	0x00,0x00,0x00,0x06,0x07,0x07,0x07,0x06,0x06,0x06,0x06,0x06,0x06,0x06,0x06,0x06,0x06,0x06,0x06,0x06,0x06,0x06,0x06,0x06,0x07,0x07,0x07,0x00,0x00,0x00,0x00,0x00,/*"2",2*/
	/* (32 X 32 , 宋体 )*/

	0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x80,0x80,0x80,0xC0,0x40,0x40,0x40,0x40,0x40,0x40,0x40,0xC0,0xC0,0x80,0x80,0x80,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
	0x00,0x00,0x00,0x00,0x00,0x06,0x0F,0x0F,0x0F,0x0C,0x00,0x00,0x80,0x80,0x80,0x80,0x80,0xC0,0xC0,0xC0,0x61,0x7F,0x3F,0x3F,0x1F,0x0E,0x00,0x00,0x00,0x00,0x00,0x00,
	0x00,0x00,0x00,0x00,0xC0,0xE0,0xE0,0xE0,0xE0,0xC0,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x01,0x01,0x01,0x03,0x87,0xFE,0xFE,0xFC,0xFC,0x78,0x00,0x00,0x00,0x00,
	0x00,0x00,0x00,0x00,0x00,0x01,0x01,0x03,0x03,0x02,0x06,0x04,0x04,0x04,0x04,0x04,0x04,0x04,0x04,0x06,0x06,0x03,0x03,0x03,0x01,0x01,0x00,0x00,0x00,0x00,0x00,0x00,/*"3",3*/
	/* (32 X 32 , 宋体 )*/

	0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x80,0x80,0xC0,0xC0,0xC0,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
	0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x80,0x80,0xC0,0x60,0x30,0x18,0x08,0x0C,0x06,0x03,0x01,0xFF,0xFF,0xFF,0xFF,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
	0x00,0x00,0x10,0x18,0x18,0x14,0x16,0x13,0x11,0x10,0x10,0x10,0x10,0x10,0x10,0x10,0x10,0x10,0x10,0xFF,0xFF,0xFF,0xFF,0x10,0x10,0x10,0x10,0x10,0x10,0x10,0x00,0x00,
	0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x08,0x08,0x08,0x08,0x08,0x08,0x0C,0x0F,0x0F,0x0F,0x0F,0x0C,0x08,0x08,0x08,0x08,0x08,0x00,0x00,0x00,/*"4",4*/
	/* (32 X 32 , 宋体 )*/

	0x00,0x00,0x00,0x00,0x00,0x00,0x00,0xC0,0xC0,0xC0,0xC0,0xC0,0xC0,0xC0,0xC0,0xC0,0xC0,0xC0,0xC0,0xC0,0xC0,0xC0,0xC0,0xC0,0xC0,0xC0,0x40,0x00,0x00,0x00,0x00,0x00,
	0x00,0x00,0x00,0x00,0x00,0x00,0xF8,0xFF,0x8F,0x80,0x40,0x40,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x60,0x60,0xE0,0xC0,0xC0,0xC0,0x80,0x00,0x00,0x00,0x00,0x00,0x00,
	0x00,0x00,0x00,0x00,0xC0,0xE0,0xE1,0xE1,0xE0,0x60,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0xC1,0xFF,0xFF,0xFF,0xFF,0x3E,0x00,0x00,0x00,0x00,
	0x00,0x00,0x00,0x00,0x00,0x01,0x01,0x03,0x03,0x02,0x06,0x04,0x04,0x04,0x04,0x04,0x04,0x04,0x04,0x06,0x06,0x03,0x03,0x03,0x01,0x01,0x00,0x00,0x00,0x00,0x00,0x00,/*"5",5*/
	/* (32 X 32 , 宋体 )*/

	0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x80,0x80,0x80,0xC0,0x40,0x40,0x40,0x40,0x40,0x40,0x40,0x40,0xC0,0xC0,0x80,0x80,0x00,0x00,0x00,0x00,0x00,0x00,
	0x00,0x00,0x00,0xC0,0xF0,0xF8,0xFC,0xFE,0x1F,0x03,0x81,0x81,0x80,0x40,0x40,0x40,0x40,0x40,0x40,0x40,0x40,0xC0,0xC3,0x83,0x83,0x83,0x03,0x00,0x00,0x00,0x00,0x00,
	0x00,0x00,0x00,0x1F,0x7F,0xFF,0xFF,0xFF,0xE2,0x81,0x01,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x01,0x83,0xFF,0xFF,0xFE,0x3C,0x00,0x00,0x00,
	0x00,0x00,0x00,0x00,0x00,0x00,0x01,0x01,0x03,0x03,0x03,0x06,0x06,0x06,0x04,0x04,0x04,0x04,0x04,0x04,0x04,0x06,0x02,0x03,0x03,0x01,0x01,0x00,0x00,0x00,0x00,0x00,/*"6",6*/
	/* (32 X 32 , 宋体 )*/

	0x00,0x00,0x00,0x00,0x00,0x80,0xC0,0xC0,0xC0,0xC0,0xC0,0xC0,0xC0,0xC0,0xC0,0xC0,0xC0,0xC0,0xC0,0xC0,0xC0,0xC0,0xC0,0xC0,0xC0,0xC0,0xC0,0x40,0x00,0x00,0x00,0x00,
	0x00,0x00,0x00,0x00,0x0C,0x0F,0x03,0x01,0x01,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x80,0xC0,0xE0,0x70,0x30,0x18,0x0C,0x06,0x03,0x01,0x00,0x00,0x00,0x00,0x00,0x00,
	0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x80,0xF0,0xF8,0xFC,0xFF,0xFF,0x07,0x01,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
	0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x03,0x07,0x07,0x07,0x07,0x07,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,/*"7",7*/
	/* (32 X 32 , 宋体 )*/

	0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x80,0x80,0x80,0xC0,0xC0,0x40,0x40,0x40,0x40,0x40,0x40,0x40,0x40,0xC0,0xC0,0x80,0x80,0x80,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
	0x00,0x00,0x00,0x00,0x0E,0x1F,0x3F,0x7F,0x71,0x70,0xE0,0xE0,0xC0,0xC0,0xC0,0x80,0x80,0x80,0x80,0x80,0x80,0xC0,0x40,0x63,0x7F,0x3F,0x1F,0x0E,0x00,0x00,0x00,0x00,
	0x00,0x00,0x00,0x70,0xF8,0xFC,0xFC,0x8E,0x06,0x03,0x01,0x01,0x00,0x00,0x01,0x01,0x01,0x01,0x03,0x03,0x03,0x07,0x07,0x0E,0x9E,0xFC,0xFC,0xF8,0x70,0x00,0x00,0x00,
	0x00,0x00,0x00,0x00,0x00,0x01,0x01,0x03,0x03,0x02,0x06,0x06,0x04,0x04,0x04,0x04,0x04,0x04,0x04,0x04,0x04,0x06,0x02,0x03,0x03,0x01,0x01,0x00,0x00,0x00,0x00,0x00,/*"8",8*/
	/* (32 X 32 , 宋体 )*/

	0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x80,0x80,0x80,0xC0,0x40,0x40,0x40,0x40,0x40,0x40,0x40,0x40,0x40,0xC0,0x80,0x80,0x80,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
	0x00,0x00,0x00,0x78,0xFE,0xFF,0xFF,0x83,0x01,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x81,0x87,0xFF,0xFF,0xFE,0xFC,0xF0,0x00,0x00,0x00,
	0x00,0x00,0x00,0x00,0x00,0x01,0x83,0x83,0x83,0x86,0x06,0x04,0x04,0x04,0x04,0x04,0x04,0x04,0x06,0x02,0x02,0x83,0xE1,0xF8,0xFF,0x7F,0x3F,0x1F,0x07,0x00,0x00,0x00,
	0x00,0x00,0x00,0x00,0x00,0x01,0x03,0x03,0x07,0x07,0x04,0x04,0x04,0x04,0x04,0x04,0x04,0x06,0x02,0x03,0x03,0x03,0x01,0x01,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,/*"9",9*/
	/* (32 X 32 , 宋体 )*/

	0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
	0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
	0x00,0x00,0x00,0x00,0x00,0x80,0x80,0x80,0x80,0x80,0x80,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
	0x00,0x00,0x00,0x00,0x03,0x07,0x07,0x07,0x07,0x07,0x07,0x03,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00/*".",10*/
		/* (32 X 32 , 宋体 )*/


};
void delay()
{
	volatile int i=0,j;
	for(i=0;i<20;i++)
		j=3;
	//rt_thread_delay(1);
}
int i2c_start()  
{
	//GPIO_SetBits(GPIOA, SDA);
	//GPIO_SetBits(GPIOA, SCL);
	//GPIO_InitStructure.GPIO_Mode = GPIO_Mode_OUT;
	//GPIO_InitStructure.GPIO_Pin = SDA;
	//GPIO_Init(GPIOA, &GPIO_InitStructure);	
	//GPIO_InitStructure.GPIO_Pin = SCL;
	//GPIO_Init(GPIOA, &GPIO_InitStructure);	

	delay();
	GPIO_ResetBits(GPIOA, SDA);
	delay();  
}  

void i2c_stop()  
{  
	GPIO_ResetBits(GPIOA, SCL);
	delay();
	GPIO_SetBits(GPIOA, SCL);
	delay();
	GPIO_ResetBits(GPIOA, SDA);
	GPIO_InitStructure.GPIO_Mode = GPIO_Mode_OUT;
	GPIO_InitStructure.GPIO_Pin = SDA;
	GPIO_Init(GPIOA, &GPIO_InitStructure);	
	delay();  
	GPIO_SetBits(GPIOA, SDA);
}  
unsigned char i2c_read_ack()  
{  
	unsigned char r;  
	GPIO_InitStructure.GPIO_Mode = GPIO_Mode_IN;
	GPIO_InitStructure.GPIO_Pin = SDA;
	GPIO_Init(GPIOA, &GPIO_InitStructure);	
	GPIO_ResetBits(GPIOA, SCL);
	delay();  
	GPIO_SetBits(GPIOA, SCL);
	r = GPIO_ReadInputDataBit(GPIOA,SDA);
	delay();  
	//rt_kprintf("ack is %d\n",r);
	return r;  
}  
void i2c_write_byte(unsigned char b)  
{  
	int i,j=0;  
	GPIO_InitStructure.GPIO_Mode = GPIO_Mode_OUT;
	GPIO_InitStructure.GPIO_Pin = SDA;

	for (i=7; i>=0; i--) 
	{  
		GPIO_ResetBits(GPIOA, SCL);
		if(b&(1<<i))
			GPIO_SetBits(GPIOA, SDA);
		else
			GPIO_ResetBits(GPIOA, SDA);	
		if(j==0)
		{			
			GPIO_Init(GPIOA, &GPIO_InitStructure);	
			j=1;
		}		
		delay();  
		GPIO_SetBits(GPIOA, SCL);
		delay();  
	}  
	i2c_read_ack();
}
int i2c_send_ack()  
{  
	GPIO_ResetBits(GPIOA, SCL);
	GPIO_ResetBits(GPIOA, SDA);
	GPIO_InitStructure.GPIO_Mode = GPIO_Mode_OUT;
	GPIO_InitStructure.GPIO_Pin = SDA;
	GPIO_Init(GPIOA, &GPIO_InitStructure);
	delay();  
	GPIO_SetBits(GPIOA, SCL);
	delay();  
}  

unsigned char i2c_read_byte()  
{  
	int i;  
	unsigned char r = 0;  

	GPIO_InitStructure.GPIO_Mode = GPIO_Mode_IN;
	GPIO_InitStructure.GPIO_Pin = SDA;
	GPIO_Init(GPIOA, &GPIO_InitStructure);	
	for (i=7; i>=0; i--) {
		GPIO_ResetBits(GPIOA, SCL);
		delay();  
		r = (r <<1) | GPIO_ReadInputDataBit(GPIOA,SDA);
		GPIO_SetBits(GPIOA, SCL);
		delay();  
	}  
	i2c_send_ack();
	return r;  
}  
void i2c_read(unsigned char addr, unsigned char sub_addr,unsigned char* buf, int len)  
{  
	int i;  
	unsigned char t;  
	i2c_start();
	i2c_write_byte(addr<<1);  
	i2c_write_byte(sub_addr);  
	i2c_stop();
	rt_thread_delay(1);
	i2c_start();
	t = (addr << 1) | 1; 
	i2c_write_byte(t);  
	for (i=0; i<len; i++)  
		buf[i] = i2c_read_byte();  
	i2c_stop();
}  
void display(unsigned char addr)
{
	int i;  
	GPIO_InitStructure.GPIO_Mode = GPIO_Mode_OUT;
	GPIO_InitStructure.GPIO_OType = GPIO_OType_PP;
	GPIO_InitStructure.GPIO_PuPd = GPIO_PuPd_NOPULL;
	GPIO_InitStructure.GPIO_Speed = GPIO_Speed_50MHz;

	i2c_start();
	i2c_write_byte(addr<<1);  
	i2c_write_byte(0x40);
	for (i=0; i<sizeof(buffer)/sizeof(uint8_t); i++)  
	{
		i2c_write_byte(buffer[i]);
	}
	i2c_stop();
}
void i2c_write (unsigned char addr, unsigned char* buf, int len)  
{  
	int i;  
	GPIO_InitStructure.GPIO_Mode = GPIO_Mode_OUT;
	GPIO_InitStructure.GPIO_OType = GPIO_OType_PP;
	GPIO_InitStructure.GPIO_PuPd = GPIO_PuPd_NOPULL;
	GPIO_InitStructure.GPIO_Speed = GPIO_Speed_50MHz;

	i2c_start();
	i2c_write_byte(addr<<1);  
	for (i=0; i<len; i++)  
	{
		i2c_write_byte(0x00);
		i2c_write_byte(buf[i]);
	}
	i2c_stop();
}  
void setpixel(uint8_t x, uint8_t y,uint8_t clear) {
	/*判断是否超出了边界128×64*/
	if ((x >= SSD1306_LCDWIDTH) || (y >= SSD1306_LCDHEIGHT))
		return;

	/*clear用于确定是背景色黑色，还是前景色，主要在绘制电池图标时使用，TRUE是背景色，FALSE是前景色*/
	if(clear)
		buffer[x+ (y/8)*SSD1306_LCDWIDTH] = 0;  
	else
		buffer[x+ (y/8)*SSD1306_LCDWIDTH] |= _BV((y%8));  
}
/*画线接口，从(x0,y0)到(x1,y1)画一条直线*/
void drawline(uint8_t x0, uint8_t y0, uint8_t x1, uint8_t y1) {
	/*确定x,y坐标的位差,原则是从小坐标的点画向大坐标的点*/
	uint8_t steep = abs(y1 - y0) > abs(x1 - x0);
	uint8_t dx, dy,tmp;
	int8_t err;
	int8_t ystep;
	/*交替x0,y0 x1,y1*/
	if (steep) {
		tmp=x0;
		x0=y0;
		y0=tmp;
		tmp=x1;
		x1=y1;
		y1=tmp;
	}
	/*交替x0,x1 y0,y1*/
	if (x0 > x1) {
		tmp=x0;
		x0=x1;
		x1=tmp;
		tmp=y0;
		y0=y1;
		y1=tmp;
	}

	/*计算画点xy长度*/
	dx = x1 - x0;
	dy = abs(y1 - y0);

	err = dx / 2;

	/*根据y0,y1的大小，计算step大小*/
	if (y0 < y1) {
		ystep = 1;
	} else {
		ystep = -1;}
	/*从x0开始画点*/
	for (; x0<x1; x0++) {
		if (steep) {
			setpixel(y0, x0,0);
		} else {
			setpixel(x0, y0,0);
		}
		err -= dy;
		if (err < 0) {
			y0 += ystep;
			err += dx;
		}
	}
}

/*从xy坐标开始填充宽度w，高度h的区域*/
void fillrect(uint8_t x, uint8_t y, uint8_t w, uint8_t h,uint8_t clear) {

	uint8_t i,j;
	for (i=x; i<x+w; i++) {
		for (j=y; j<y+h; j++) {
			setpixel(i, j,clear);
		}
	}
}
/*绘图电池图标和数字信息，bat1是第一个电池的电量，bat2是第二个电池的电量，从0到100,c是数字串，总共6个数字，一个.*/
void draw(uint8_t bat1,uint8_t bat2,char *c)
{
	int x=0,line=0,x1=0,i,j;
	/*确定参数是否合法*/
	if(bat1>100||bat1<0||bat2>100||bat2<0||strlen(c)!=7)
		return ;
	clear();
	/*当bat1，bat2是1时，对电池图标做清空处理*/
	if(bat1==1)
	{
		fillrect(2,31,28,15,1);
	}
	if(bat2==1)
	{
		fillrect(2,48,28,15,1);
	}
	/*绘制电池1*/
	drawline(1,32,28,32);
	drawline(28,32,28,36);
	drawline(28,36,32,36);
	drawline(32,36,32,43);
	drawline(32,43,28,43);
	drawline(28,43,28,47);
	drawline(28,47,1,47);
	drawline(1,47,1,32);
	fillrect(1,32,(uint8_t)(bat1*28/100),15,0);
	/*绘制电池2*/
	drawline(1,49,28,49);
	drawline(28,49,28,52);
	drawline(28,52,32,52);
	drawline(32,52,32,59);
	drawline(32,59,28,59);
	drawline(28,59,28,63);
	drawline(28,63,1,63);
	drawline(1,63,1,49);
	fillrect(1,49,(uint8_t)(bat2*28/100),15,0);
	while(c[0]!=0)
	{
		if(c[0]!='.')
		{	/*绘制数字0到9*/
			x=x1;
			/*从字库里提取数字的字模到显示缓冲区，一个数字占用4行每行32个点*/
			for(j=0;j<32;j++)
			{				
				buffer[x+((line)*128)]=font32[(c[0]-48)*128+j];
				x++;				
			}
			for(j=0;j<32;j++)
			{				
				buffer[x+((line+1)*128)-32]=font32[(c[0]-48)*128+32+j];
				x++;				
			}
			for(j=0;j<32;j++)
			{				
				buffer[x+((line+2)*128)-64]=font32[(c[0]-48)*128+64+j];
				x++;				
			}
			for(j=0;j<32;j++)
			{				
				buffer[x+((line+3)*128)-96]=font32[(c[0]-48)*128+96+j];
				x++;				
			}
		}
		else
		{
			/*绘制
			 * .*/
			x=x1;
			for(j=0;j<32;j++)
			{				
				buffer[x+((line)*128)]=font32[1280+j];
				x++;				
			}
			for(j=0;j<32;j++)
			{				
				buffer[x+((line+1)*128)-32]=font32[1280+32+j];
				x++;				
			}
			for(j=0;j<32;j++)
			{				
				buffer[x+((line+2)*128)-64]=font32[1280+64+j];
				x++;				
			}
			for(j=0;j<32;j++)
			{				
				buffer[x+((line+3)*128)-96]=font32[1280+96+j];
				x++;				
			}
		}
		/*x坐标增加31，一个数字或者.需要32个点*/
		x1=x1+31;
		if(x1+31>SSD1306_LCDWIDTH)
		{/*超过了一行的边界，则行数+4，x从33开始绘制数字，绕过了电池的区域*/
			x1=33;
			line=line+4;
		}

		c++;

	}	
}
void clear(void) 
{
	 memset(buffer, 0, (SSD1306_LCDWIDTH*SSD1306_LCDHEIGHT/8));
}
